/*! jquery.visualstate.js v0.6.0 Copyright 2015 Jens Elstner */
!function(t,a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(this,function(t){var a="vstate-",e="-$all",n="vis-",i={},r=function(t,e){return t.data(a+(e||""))},f=function(t,a,e,n){var i=r(t,a);i===e?s(t,a,n):s(t,a,e)},o=function(t,a,e){if(a)for(var n=a.split(","),i=0;i<n.length;i++){var r=n[i].split(":");switch(r[0]){case"addClass":e?t.removeClass(r[1].trim()):t.addClass(r[1].trim());break;case"removeClass":e?t.addClass(r[1].trim()):t.removeClass(r[1].trim())}}},s=function(r,f,s,d){s||(s="");var u=r.data(a+f)||"",v=f+"-"+s,c=i[v];if(u===s){var l=c&&c.$update;return void("function"==typeof l&&l.apply(c,[r,d]))}var p=f+"-"+u,l=c&&c[p];"function"==typeof l&&l.apply(c,[r,d]),l=i[f+e]&&i[f+e][p],"function"==typeof l&&l.apply(i[f+e],[r,d]),l=c&&c[f+e],"function"==typeof l&&l.apply(c,[r,d]);var d=this;r.find("[data-"+n+p+"],[data-"+n+v+"]").each(function(a,e){var i=t(e),r=i.data(n+p),f=i.data(n+v);o(i,r,!0),o(i,f)}),s===f+"-"?(r.removeAttr("data-"+a+f),r.removeData(a+f)):r.data(a+f,s)};return t.fn.visualstate=function(t,a,e){return"undefined"==typeof a?r(this,t):void("string"!=typeof e?s(this,t,a,e):f(this,t,a,e))},t.fn.visualstate.register=function(e,n){if(e&&(i=t.extend(!0,i||{},e),n)){var r,f,o=[];for(f in e)r=f.split("-")[0],-1==o.indexOf(r)&&o.push(r);for(var d=0;d<o.length;d++)r=o[d],t(document).find("[data-"+a+r+"]").each(function(e,n){var i=t(n),f=i.data(a+r);i.removeAttr("data-"+a+r),i.removeData(a+r),s(i,r,f)})}},t.fn.visualstate});
