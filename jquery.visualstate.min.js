!function(t,a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(this,function(t){var a="vstate-",e="-$all",n="vis-",i={},f=function(t,e){return t.data(a+(e||""))},r=function(t,a,e,n){var i=f(t,a);i===e?s(t,a,n):s(t,a,e)},o=function(t,a,e){if(a)for(var n=a.split(","),i=0;i<n.length;i++){var f=n[i].split(":");switch(f[0]){case"addClass":e?t.removeClass(f[1].trim()):t.addClass(f[1].trim());break;case"removeClass":e?t.addClass(f[1].trim()):t.removeClass(f[1].trim())}}},s=function(f,r,s){s||(s="");var d=f.data(a+r)||"";if(d!==s){var u=r+"-"+d,v=r+"-"+s,c=i[v]&&i[v][u];"function"==typeof c&&c(f),c=i[r+e]&&i[r+e][u],"function"==typeof c&&c(f),c=i[v]&&i[v][r+e],"function"==typeof c&&c(f);f.find("[data-"+n+u+"],[data-"+n+v+"]").each(function(a,e){var i=t(e),f=i.data(n+u),r=i.data(n+v);o(i,f,!0),o(i,r)}),s===r+"-"?(f.removeAttr("data-"+a+r),f.removeData(a+r)):f.data(a+r,s)}};return t.fn.visualstate=function(t,a,e){return"undefined"==typeof a?f(this,t):void("undefined"==typeof e?s(this,t,a):r(this,t,a,e))},t.fn.visualstate.register=function(e,n){if(e&&(i=t.extend(i||{},e),n)){var f,r,o=[];for(r in e)f=r.split("-")[0],-1==o.indexOf(f)&&o.push(f);for(var d=0;d<o.length;d++)f=o[d],t(document).find("[data-"+a+f+"]").each(function(e,n){var i=t(n),r=i.data(a+f);i.removeAttr("data-"+a+f),i.removeData(a+f),s(i,f,r)})}},t.fn.visualstate});
